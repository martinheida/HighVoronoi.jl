<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Examples Voronoi Generation · HighVoronoi.jl</title><script data-outdated-warner src="../../assets/warner.js"></script><link rel="canonical" href="https://martinheida.github.io/HighVoronoi.jl/man/short/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">HighVoronoi.jl</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Manual Voronoi</span><ul><li class="is-active"><a class="tocitem" href>Examples Voronoi Generation</a><ul class="internal"><li><a class="tocitem" href="#quickVG"><span>Getting Started...</span></a></li><li><a class="tocitem" href="#Bounded-domains,-volumes-and-interface-areas"><span>Bounded domains, volumes and interface areas</span></a></li><li><a class="tocitem" href="#Periodic-Boundaries"><span>Periodic Boundaries</span></a></li><li><a class="tocitem" href="#Recycle-Voronoi-data-for-new-integrations"><span>Recycle Voronoi data for new integrations</span></a></li><li><a class="tocitem" href="#Recycle-Voronoi-data-for-refined-geometries"><span>Recycle Voronoi data for refined geometries</span></a></li><li><a class="tocitem" href="#Store-and-load-data"><span>Store and load data</span></a></li></ul></li><li><a class="tocitem" href="../workflowmesh/">Workflow</a></li><li><a class="tocitem" href="../geometry/">Voronoi: Nodes and Geometry, Integrators</a></li><li><a class="tocitem" href="../raycast/">Voronoi: Raycast methods</a></li><li><a class="tocitem" href="../multithread/">Multithreading</a></li><li><a class="tocitem" href="../database/">Voronoi: Database Structure</a></li><li><a class="tocitem" href="../improving/">Improving Voronoi meshes for FV </a></li><li><a class="tocitem" href="../boundaries/">Boundaries</a></li><li><a class="tocitem" href="../advanced/">Advanced Options</a></li><li><a class="tocitem" href="../periodic/">Highspeed periodic geometries</a></li><li><a class="tocitem" href="../refine/">Refinement and Substitution of Subdomains</a></li><li><a class="tocitem" href="../projection/">Projection operators</a></li><li><a class="tocitem" href="../metapost/">Graphical Output in 2D and 3D</a></li><li><a class="tocitem" href="../errors/">Sources of errors and loss in performance</a></li></ul></li><li><span class="tocitem">Manual Finite Volume</span><ul><li><a class="tocitem" href="../finitevolumeexample/">Finite Volume Examples</a></li><li><a class="tocitem" href="../workflowfv/">Workflow in FV</a></li><li><a class="tocitem" href="../finitevolume/">Finite Volume Tutorial</a></li><li><a class="tocitem" href="../functions/">Functions</a></li><li><a class="tocitem" href="../integrals/">(More) Integrals</a></li><li><a class="tocitem" href="../toyfvfile/">Some code to test and play around</a></li></ul></li><li><a class="tocitem" href="../../showcase/">Intentions of use (EXAMPLES)</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual Voronoi</a></li><li class="is-active"><a href>Examples Voronoi Generation</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Examples Voronoi Generation</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/martinheida/HighVoronoi.jl/blob/main/docs/src/man/short.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Voronoi-generation-using-the-HighVoronoi-Library"><a class="docs-heading-anchor" href="#Voronoi-generation-using-the-HighVoronoi-Library">Voronoi generation using the HighVoronoi Library</a><a id="Voronoi-generation-using-the-HighVoronoi-Library-1"></a><a class="docs-heading-anchor-permalink" href="#Voronoi-generation-using-the-HighVoronoi-Library" title="Permalink"></a></h1><p>The following are examples to get a first impression of the functionalities of <code>HighVoronoi</code>. They do not represent the actual intention of use. For this we refer <a href="../../showcase/#intentions">here</a></p><h2 id="quickVG"><a class="docs-heading-anchor" href="#quickVG">Getting Started...</a><a id="quickVG-1"></a><a class="docs-heading-anchor-permalink" href="#quickVG" title="Permalink"></a></h2><p>You can write your first HighVoronoi code e.g. as follows:</p><pre><code class="language-julia hljs">function VoronoiTest(dim,nop)
    # create a random matrix of dim x nop entries
    data=rand(dim,nop)
    # transform these into `nop` different static vectors of dimension `dim`
    xs=VoronoiNodes(data)
    return VoronoiGeometry(xs,Boundary())
end</code></pre><p>The command <code>Boundary()</code> creates an unbounded version of <span>$\mathbb R^{dim}$</span>. This VoronoiGeometry only contains the nodes, verteces and neighbor relations, as well as information on verteces &quot;going to infinity&quot;.</p><h2 id="Bounded-domains,-volumes-and-interface-areas"><a class="docs-heading-anchor" href="#Bounded-domains,-volumes-and-interface-areas">Bounded domains, volumes and interface areas</a><a id="Bounded-domains,-volumes-and-interface-areas-1"></a><a class="docs-heading-anchor-permalink" href="#Bounded-domains,-volumes-and-interface-areas" title="Permalink"></a></h2><p>So let us make the following modification:</p><pre><code class="language-julia hljs">function VoronoiTest_cube(dim,nop,integrator=HighVoronoi.VI_POLYGON)
    # create a random matrix of dim x nop entries
    data=rand(dim,nop)
    # transform these into `nop` different static vectors of dimension `dim`
    xs=VoronoiNodes(data)
    return VoronoiGeometry(xs,cuboid(dim,periodic=Int64[]),integrator=integrator)
end

vd=VoronoiData(VoronoiTest_cube(2,10))

println(vd.volume)
println(vd.neighbors)
println(vd.area)</code></pre><ul><li>The parameter <code>integrator</code> tells julia wether and how to compute volumes of cells and areas of interfaces. <code>VI_POLYGON</code> refers to an exact trigonalization of the polytopes. </li><li><code>Boundary()</code> has been exchanged for <code>cuboid(dim,periodic=Int64[])</code>, which in this case returns the simple cube <span>$[0,1]^{dim}$</span>. Remark: Unlike <code>VI_MONTECARLO</code> the algorithm <code>VI_POLYGON</code>  will return finite volumes also for the infinite cells that are automatically created on unbounded domains like <code>Boundary()</code>. </li><li>The last three lines cause julia to print the volumes of the 10 cells, the neighbors of each cell and the area of the respective interfaces. Note that some points have neighbors with values from <code>11</code> to <code>14</code>. </li></ul><div class="admonition is-warning"><header class="admonition-header">Boundary planes can be neighbors</header><div class="admonition-body"><p>The numbers <code>11</code> to <code>14</code> represent an internal numbering of the 4 hyperplanes (e.g. lines) that define the cube <span>$[0,1]^2$</span>. In general, given a domain with <span>$N$</span> nodes and <span>$P$</span> planes, whenever a Voronoi cell corresponding to node <span>$n$</span> touches a boundary plane <span>$p$</span> this will cause a neighbor entry <span>$N+p$</span>.  </p></div></div><h2 id="Periodic-Boundaries"><a class="docs-heading-anchor" href="#Periodic-Boundaries">Periodic Boundaries</a><a id="Periodic-Boundaries-1"></a><a class="docs-heading-anchor-permalink" href="#Periodic-Boundaries" title="Permalink"></a></h2><p>The <code>HighVoronoi</code> package provides several possibilities to define boundaries of bounded or (partially) unbounded domains. It also provides the possibility to study periodic boundary conditions:</p><pre><code class="language-julia hljs">function VoronoiTest_cube_periodic(dim,nop,integrator=HighVoronoi.VI_POLYGON)
    # create a random matrix of dim x nop entries
    data=rand(dim,nop)
    # transform these into `nop` different static vectors of dimension `dim`
    xs=VoronoiNodes(data)
    return VoronoiGeometry(xs,cuboid(dim,periodic=[1]),integrator=integrator)
end

vd=VoronoiData(VoronoiTest_cube_periodic(2,10))

println(vd.volume)
println(vd.neighbors)
println(vd.area)</code></pre><ul><li><code>periodic=[1]</code> in the <code>cuboid(...)</code> command forces the Voronoi mesh to be periodic in space dimension <span>$1$</span>. Note that the internal default is <code>periodic = collect(1:dim)</code>, i.e. the grid to be periodic in all space dimensions. Our current choice has the following essential consequences.   <ul><li>No cell will have <span>$11$</span> or <span>$12$</span> as a neighbor, since these boundaries are now periodic. </li><li>Some cells <code>n</code> will have &quot;doubled&quot; neighbors, i.e. the same neighbor node appears twice (or even more often for e.g. <code>periodic=[1,2]</code>) in the array  <code>vd.neighbors[n]</code>. This is since for only few cells it is highly probable, that one cell has the same neighbor both &quot;on the left&quot; and &quot;on the right&quot;.</li></ul></li></ul><h2 id="Recycle-Voronoi-data-for-new-integrations"><a class="docs-heading-anchor" href="#Recycle-Voronoi-data-for-new-integrations">Recycle Voronoi data for new integrations</a><a id="Recycle-Voronoi-data-for-new-integrations-1"></a><a class="docs-heading-anchor-permalink" href="#Recycle-Voronoi-data-for-new-integrations" title="Permalink"></a></h2><p>The following code first generates a Voronoi grid, simulatneously integrating the function <code>x-&gt;[norm(x),1]</code>. Afterwards, the volume and area information is used to integrate the function <code>x-&gt;[x[1]]</code></p><pre><code class="language-julia hljs">data = rand(4,20)#round.(rand(dim,nop),digits=4)
xs = HighVoronoi.VoronoiNodes(data)

VG = VoronoiGeometry(xs,cuboid(4,periodic=Int64[]),integrator=HighVoronoi.VI_POLYGON,integrand = x-&gt;[norm(x),1])

VG2 = VoronoiGeometry(VG,integrand = x-&gt;[x[1]],integrate=true,integrator=HighVoronoi.VI_HEURISTIC)

vd = VoronoiData(VG)
println(vd.bulk_integral)

vd2 = VoronoiData(VG2)
println(vd2.bulk_integral)</code></pre><h2 id="Recycle-Voronoi-data-for-refined-geometries"><a class="docs-heading-anchor" href="#Recycle-Voronoi-data-for-refined-geometries">Recycle Voronoi data for refined geometries</a><a id="Recycle-Voronoi-data-for-refined-geometries-1"></a><a class="docs-heading-anchor-permalink" href="#Recycle-Voronoi-data-for-refined-geometries" title="Permalink"></a></h2><p>The following creates a <code>VoronoiGeometry VG</code>, then makes a copy <code>VG2</code> and refines it with 20 points inside the region <span>$(0,\,0.2)^4$</span>. </p><pre><code class="language-julia hljs">xs = HighVoronoi.VoronoiNodes(rand(4,20))

VG = VoronoiGeometry(xs,cuboid(4,periodic=Int64[]),integrator=HighVoronoi.VI_POLYGON,integrand = x-&gt;[norm(x),1])

VG2 = copy(VG)

refine!(VG,VoronoiNodes(0.2*rand(4,20)))

vd = VoronoiData(VG)
println(vd.bulk_integral)

vd2 = VoronoiData(VG2)
println(vd2.bulk_integral)</code></pre><h2 id="Store-and-load-data"><a class="docs-heading-anchor" href="#Store-and-load-data">Store and load data</a><a id="Store-and-load-data-1"></a><a class="docs-heading-anchor-permalink" href="#Store-and-load-data" title="Permalink"></a></h2><p>Data can easily be stored using the following </p><pre><code class="language-julia hljs">Geo = VoronoiGeometry(HighVoronoi.VoronoiNodes(rand(4,20)), cuboid(4,periodic=Int64[]), integrator=HighVoronoi.VI_POLYGON, integrand = x-&gt;[norm(x),1])

write_jld(Geo,&quot;example.jld&quot;)</code></pre><p>the ending &quot;.jld&quot; is important as it indicates julia which data format to use. Retrieve this data later using</p><pre><code class="language-julia hljs">Geo = VoronoiGeometry(&quot;example.jld&quot;, bulk=true, interface=true, integrand = x-&gt;[norm(x),1])</code></pre><div class="admonition is-warning"><header class="admonition-header">integrands can easily be messed up...</header><div class="admonition-body"><p>The method does not store the <code>integrand</code> parameter to the file. However, due to <code>bulk=true, interface=true</code> the integral data is loaded from the file and must be properly interpreted by a potential user. This has drawbacks and advantages, as will be discussed in the <a href="man/showcase/">Intentions of use</a>.</p></div></div></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../">« Home</a><a class="docs-footer-nextpage" href="../workflowmesh/">Workflow »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Thursday 12 September 2024 10:07">Thursday 12 September 2024</span>. Using Julia version 1.10.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
